{% extends "layout.html" %}
{% block header %}
<div>
  <h2>{{node["name"]|e}}</h2>
  <dl class="dl-horizontal">
    <dt>path</dt>
    <dd>{{node["path"]|e}}</dd>
    <dt>comment</dt>
    <dd class="dp-comment" dp-path="{{node['path']}}">{{node["comment"]|e}}</dd>
    <dt>tag</dt>
    <dd>
      {% for p in parents %}
      <span class="label label-default">
        <a href="{{ url_for('show_node', path=p['path'][1:])}}"> {{p['name']|e}}</a>
        <a href="{{ url_for('untag', path=node['path'][1:], project_path=p['path'][1:])}}">
          <span class="glyphicon glyphicon-remove" aria-hidden="true"/>
      </a></span>
      {% endfor %}
      <form action="{{ url_for('add_tag', path=node['path'][1:]) }}"
            method="post" class="form-inline add_tag" >
        <input class="form-control" type="text" name="tagname"
               autocomplete="off" list="project_id_list">
        <datalist id="project_id_list">
          {% for p in project_ids %}
          <option value="{{p}}">
          {% endfor %}
        </datalist>
        <button type="submit" class="btn btn-default">
          <span class="glyphicon glyphicon-tag" aria-hidden="true"/>
        </button>
      </form>
    </dd>
  </dl>
</div>
{% endblock %}
{% block body %}
<table class="dp-project table table-condensed table-striped">
  <thead>
    <tr>
      <th>name</th>
      <th>comment</th>
      {% for c in cfg %}
      <th>{{c|e}}</th>
      {% endfor %}
    </tr>
  </thead>
  <tbody>
    {% for path in df.index %}
    {% set s = df.ix[path] %}
    <tr>
      <td>
        <a href="{{ url_for('show_node', path=path[1:]) }}"> {{s["name"]|e}} </a>
      </td>
      <td class="dp-comment" dp-path="{{path}}">{{s["comment"]|e}}</td>
      {% for c in cfg %}
      <td>{{s[c]|e}}</td>
      {% endfor %}
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
